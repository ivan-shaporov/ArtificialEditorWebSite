<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <title>Artificial Editor</title>
  <script>
    function rewrite()
    {
      const draft = document.getElementById("draft");
      const rewritten = document.getElementById("rewritten");
      //alert(draft.value);

      const apiUrl = "https://yellow-dune-042fe751e.2.azurestaticapps.net/api/RewriteEmail";
      let data = {element: "barium"};

      /*fetch(apiUrl, {
        method: "POST",
        headers: {'Content-Type': 'application/json'}, 
        body: JSON.stringify(data)
      }).then(res => {
        //console.log("Request complete! response:", res);
        rewritten.value = res.text()
      });*/
      f();
    }

    async function f(){
      //const { text } = await (await fetch("/api/RewriteEmail")).json();
      const text = await (await fetch("/api/RewriteEmail")).text();
      const rewritten = document.getElementById("rewritten");
      rewritten.value = text
    }
  </script>
</head>

<body>
  <main>
    <h1>Artificial Editor</h1>

    <textarea maxlength="10" rows="10", cols="50" id="draft" placeholder=
"John Doe,

I lost your invoice.
Send it again.
If you don't send it I cannot pay.

Jack"
    ></textarea>

    <br/>(allow reading by humans for improving the service <input id="allowLog" type=checkbox>) <button onclick="rewrite()">Rewrite</button><br/>

    <div>
      I would write it like this:
    </div>

    <br/><div id="rewritten">
      Dear Mr. Doe,

      I hope this email finds you well. I seem to have misplaced your invoice and I was wondering if you could send it to me again. As I am unable to locate it, I am unable to process payment at this time.

      I apologize for any inconvenience this may have caused and appreciate your prompt attention to this matter.

      Sincerely,
      Jack
    </div>
  </main>
</body>

</html>