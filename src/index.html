<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <title>Artificial Editor</title>
  <script>
    async function rewrite()
    {
      const draft = document.getElementById("draft");
      const allowLog = document.getElementById("allowLog");

      const apiUrl = "https://yellow-dune-042fe751e.2.azurestaticapps.net/api/RewriteEmail";
      let data = {text: draft.value, allowLog: allowLog.checked};

      const reply = await (await fetch(apiUrl, {
        method: "POST",
        headers: {'Content-Type': 'application/json'}, 
        body: JSON.stringify(data)
      })).json();

      const rewritten = document.getElementById("rewritten");
      rewritten.innerText = reply.text;
    }
  </script>
</head>

<body>
  <main>
    <h1>Artificial Editor</h1>

    <div>
      I am Artificial Intelligence that can rewrite e-mails for you. Given the text below:
    </div><br/>

    <textarea maxlength="100" rows="20", cols="100" id="draft" placeholder=
"John Doe,

I lost your invoice.
Send it again.
If you don't send it I cannot pay.

Jack"
    ></textarea><br/>

    <div style="padding-top: 1em;">
      I would write it like this:
    </div>

    <div id="rewritten" class="letter">
      Dear Mr. Doe,

      I hope this email finds you well. I seem to have misplaced your invoice and I was wondering if you could send it to me again. As I am unable to locate it, I am unable to process payment at this time.

      I apologize for any inconvenience this may have caused and appreciate your prompt attention to this matter.

      Sincerely,
      Jack
    </div>

    <div>(allow reading by humans for improving the service <input id="allowLog" type=checkbox>) <button onclick="rewrite()">Rewrite</button>
    </div>
  </main>
</body>

</html>